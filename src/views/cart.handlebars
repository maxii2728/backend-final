<div class="container mt-5">
    <h1>Carrito de Compras</h1>
    {{#if cart.products.length}}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Actualizar cantidad</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            {{#each cart.products}}
            <tr>
                <td>{{this.product.title}}</td>
                <td>{{this.quantity}}</td>
                <td>${{this.product.price}}</td>
                <td>
                    <a href="/api/cart/{{../cart._id}}/products/{{this.product._id}}"
                        class="btn btn-secondary">Actualizar Cantidad individual de este producto</a>
                </td>
                <td>
                    <form action="/api/cart/{{../cart._id}}/products/{{this.product._id}}?_method=DELETE" method="POST"
                        style="display:inline;">
                        <input type="hidden" name="_method" value="DELETE">
                        <button class="btn btn-danger" type="submit">Eliminar</button>
                    </form>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>

    <div>
        <a href="/api/cart/put/{{cart._id}}" class="btn btn-primary">Actualizar el carrito</a>
    </div>
    <div>
        <form action="/api/cart/{{cart._id}}?_method=DELETE" method="POST" style="display:inline;">
            <input type="hidden" name="_method" value="DELETE">
            <button class="btn btn-danger" type="submit">Eliminar carrito completo</button>
        </form>
    </div>

    {{else}}
    <p>No hay productos en el carrito.</p>
    {{/if}}
</div>